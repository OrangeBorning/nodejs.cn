<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>dns 域名服务器 | nodejs.cn</title>
    <meta name="description" content="nodejs api 学习记录">
    <link rel="icon" href="/nodejs.cn/logo.png">
  <link rel="manifest" href="/nodejs.cn/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/nodejs.cn/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/nodejs.cn/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/nodejs.cn/assets/css/0.styles.7aacd3cd.css" as="style"><link rel="preload" href="/nodejs.cn/assets/js/app.5c390938.js" as="script"><link rel="preload" href="/nodejs.cn/assets/js/8.e8398e58.js" as="script"><link rel="prefetch" href="/nodejs.cn/assets/js/6.9ba52d28.js"><link rel="prefetch" href="/nodejs.cn/assets/js/2.2eacc74f.js"><link rel="prefetch" href="/nodejs.cn/assets/js/3.e62c53c4.js"><link rel="prefetch" href="/nodejs.cn/assets/js/4.b044af06.js"><link rel="prefetch" href="/nodejs.cn/assets/js/5.3dc49e27.js"><link rel="prefetch" href="/nodejs.cn/assets/js/7.2c534a64.js"><link rel="prefetch" href="/nodejs.cn/assets/js/9.877b85a1.js"><link rel="prefetch" href="/nodejs.cn/assets/js/10.1dff0aef.js"><link rel="prefetch" href="/nodejs.cn/assets/js/11.5d7bf7d3.js"><link rel="prefetch" href="/nodejs.cn/assets/js/12.7a78fff3.js"><link rel="prefetch" href="/nodejs.cn/assets/js/13.78de7c79.js">
    <link rel="stylesheet" href="/nodejs.cn/assets/css/0.styles.7aacd3cd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nodejs.cn/" class="home-link router-link-active"><!----> <span class="site-name">nodejs.cn</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nodejs.cn/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/nodejs.cn/API/" class="nav-link router-link-active">API</a></div> <a href="https://github.com/OrangeBorning/nodejs.cn" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nodejs.cn/guide/" class="nav-link">指南</a></div><div class="nav-item"><a href="/nodejs.cn/API/" class="nav-link router-link-active">API</a></div> <a href="https://github.com/OrangeBorning/nodejs.cn" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <div class="carbon-ads"></div> <ul class="sidebar-links"><li><a href="/nodejs.cn/API/module/" class="sidebar-link">module 模块</a></li><li><a href="/nodejs.cn/API/dns/" class="active sidebar-link">dns 域名服务器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-模块两类函数：" class="sidebar-link">dns 模块两类函数：</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolver-dns请求的独立解析程序" class="sidebar-link">dns.Resolver DNS请求的独立解析程序</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#resolver-cancel" class="sidebar-link">resolver.cancel()</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-getservers" class="sidebar-link">dns.getServers()</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-lookup-hostname-options-callback" class="sidebar-link">dns.lookup(hostname[, options], callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-lookupservice-address-port-callback" class="sidebar-link">dns.lookupService(address, port, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolve-hostname-rrtype-callback" class="sidebar-link">dns.resolve(hostname[, rrtype], callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolve4-hostname-options-callback" class="sidebar-link">dns.resolve4(hostname[, options], callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolve6-hostname-options-callback" class="sidebar-link">dns.resolve6(hostname[, options], callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolveany-hostname-callback" class="sidebar-link">dns.resolveAny(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolvecname-hostname-callback" class="sidebar-link">dns.resolveCname(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolvemx-hostname-callback" class="sidebar-link">dns.resolveMx(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolvenaptr-hostname-callback" class="sidebar-link">dns.resolveNaptr(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolvens-hostname-callback" class="sidebar-link">dns.resolveNs(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolveptr-hostname-callback" class="sidebar-link">dns.resolvePtr(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolvesoa-hostname-callback" class="sidebar-link">dns.resolveSoa(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolvesrv-hostname-callback" class="sidebar-link">dns.resolveSrv(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-resolvetxt-hostname-callback" class="sidebar-link">dns.resolveTxt(hostname, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-reverse-ip-callback" class="sidebar-link">dns.reverse(ip, callback)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#dns-setservers-servers" class="sidebar-link">dns.setServers(servers)</a></li><li class="sidebar-sub-header"><a href="/nodejs.cn/API/dns/#错误码" class="sidebar-link">错误码</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="dns-域名服务器"><a href="#dns-域名服务器" aria-hidden="true" class="header-anchor">#</a> dns 域名服务器</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dns <span class="token operator">=</span> module<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dns'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dns<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">{</span> lookup: <span class="token punctuation">[</span>Function: lookup<span class="token punctuation">]</span>,
  lookupService: <span class="token punctuation">[</span>Function: lookupService<span class="token punctuation">]</span>,
  Resolver: <span class="token punctuation">[</span>Function: Resolver<span class="token punctuation">]</span>,
  setServers: <span class="token punctuation">[</span>Function: defaultResolverSetServers<span class="token punctuation">]</span>,
  ADDRCONFIG: 1024,
  V4MAPPED: 2048,
  NODATA: <span class="token string">'ENODATA'</span>,
  FORMERR: <span class="token string">'EFORMERR'</span>,
  SERVFAIL: <span class="token string">'ESERVFAIL'</span>,
  NOTFOUND: <span class="token string">'ENOTFOUND'</span>,
  NOTIMP: <span class="token string">'ENOTIMP'</span>,
  REFUSED: <span class="token string">'EREFUSED'</span>,
  BADQUERY: <span class="token string">'EBADQUERY'</span>,
  BADNAME: <span class="token string">'EBADNAME'</span>,
  BADFAMILY: <span class="token string">'EBADFAMILY'</span>,
  BADRESP: <span class="token string">'EBADRESP'</span>,
  CONNREFUSED: <span class="token string">'ECONNREFUSED'</span>,
  TIMEOUT: <span class="token string">'ETIMEOUT'</span>,
  EOF: <span class="token string">'EOF'</span>,
  FILE: <span class="token string">'EFILE'</span>,
  NOMEM: <span class="token string">'ENOMEM'</span>,
  DESTRUCTION: <span class="token string">'EDESTRUCTION'</span>,
  BADSTR: <span class="token string">'EBADSTR'</span>,
  BADFLAGS: <span class="token string">'EBADFLAGS'</span>,
  NONAME: <span class="token string">'ENONAME'</span>,
  BADHINTS: <span class="token string">'EBADHINTS'</span>,
  NOTINITIALIZED: <span class="token string">'ENOTINITIALIZED'</span>,
  LOADIPHLPAPI: <span class="token string">'ELOADIPHLPAPI'</span>,
  ADDRGETNETWORKPARAMS: <span class="token string">'EADDRGETNETWORKPARAMS'</span>,
  CANCELLED: <span class="token string">'ECANCELLED'</span>,
  getServers: <span class="token punctuation">[</span>Function: bound getServers<span class="token punctuation">]</span>,
  resolve: <span class="token punctuation">[</span>Function: bound resolve<span class="token punctuation">]</span>,
  resolveAny: <span class="token punctuation">[</span>Function: bound queryAny<span class="token punctuation">]</span>,
  resolve4: <span class="token punctuation">[</span>Function: bound queryA<span class="token punctuation">]</span>,
  resolve6: <span class="token punctuation">[</span>Function: bound queryAaaa<span class="token punctuation">]</span>,
  resolveCname: <span class="token punctuation">[</span>Function: bound queryCname<span class="token punctuation">]</span>,
  resolveMx: <span class="token punctuation">[</span>Function: bound queryMx<span class="token punctuation">]</span>,
  resolveNs: <span class="token punctuation">[</span>Function: bound queryNs<span class="token punctuation">]</span>,
  resolveTxt: <span class="token punctuation">[</span>Function: bound queryTxt<span class="token punctuation">]</span>,
  resolveSrv: <span class="token punctuation">[</span>Function: bound querySrv<span class="token punctuation">]</span>,
  resolvePtr: <span class="token punctuation">[</span>Function: bound queryPtr<span class="token punctuation">]</span>,
  resolveNaptr: <span class="token punctuation">[</span>Function: bound queryNaptr<span class="token punctuation">]</span>,
  resolveSoa: <span class="token punctuation">[</span>Function: bound querySoa<span class="token punctuation">]</span>,
  reverse: <span class="token punctuation">[</span>Function: bound getHostByAddr<span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre></div><h2 id="dns-模块两类函数："><a href="#dns-模块两类函数：" aria-hidden="true" class="header-anchor">#</a> dns 模块两类函数：</h2> <ol><li>第一类函数，使用底层操作系统工具进行域名解析，且无需进行网络通信。 这类函数只有一个：dns.lookup()。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dns <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dns'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

dns<span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token string">'zbj.com'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> address<span class="token punctuation">,</span> family<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'IP 地址: %j 地址族: IPv%s'</span><span class="token punctuation">,</span> address<span class="token punctuation">,</span> family<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// IP 地址: &quot;192.0.43.8&quot; 地址族: IPv4</span>
</code></pre></div><ol start="2"><li>第二类函数，连接到一个真实的 DNS 服务器进行域名解析，且始终使用网络进行 DNS 查询。 这类函数包含了 dns 模块中除 dns.lookup() 以外的所有函数。 这些函数使用与 dns.lookup() 不同的配置文件（例如 /etc/hosts）。 这类函数适合于那些不想使用底层操作系统工具进行域名解析、而是想使用网络进行 DNS 查询的开发者。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dns <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dns'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

dns<span class="token punctuation">.</span><span class="token function">resolve4</span><span class="token punctuation">(</span><span class="token string">'zbj.com'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> addresses<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`IP 地址: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>addresses<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// IP 地址: [&quot;49.4.65.160&quot;]</span>
  addresses<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    dns<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> hostnames<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`IP 地址 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 逆向解析到域名: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>hostnames<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// IP 地址 49.4.65.160 逆向解析到域名: [&quot;ecs-49-4-65-160.compute.hwclouds-dns.com&quot;]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="两类函数的实现有什么区别？"><a href="#两类函数的实现有什么区别？" aria-hidden="true" class="header-anchor">#</a> 两类函数的实现有什么区别？</h3> <p>尽管 <code>dns.lookup()</code> 和各种 <code>dns.resolve *()/ dns.reverse()</code> 函数有相同的目标将网络的名字与网络地址联系在一起(反之亦然)，他们的行为是完全不同的。 这些差异可以有微妙但重大影响着 Node.js 程序行为。</p> <h4 id="dns-lookup-与-直接使用-ping-命令类似（异步-同步）"><a href="#dns-lookup-与-直接使用-ping-命令类似（异步-同步）" aria-hidden="true" class="header-anchor">#</a> <code>dns.lookup()</code> 与 直接使用 <code>ping</code> 命令类似（异步 -&gt; 同步）</h4> <p>在底层, <code>dns.lookup()</code> 使用操作系统设施与大多数其他程序相同。<code>dns.lookup()</code> 几乎总是解析给定的主机名与 <code>ping</code> 命令一样.</p> <h4 id="dns-resolve-dns-resolve-和-dns-reverse-通过网络执行dns查询（异步）"><a href="#dns-resolve-dns-resolve-和-dns-reverse-通过网络执行dns查询（异步）" aria-hidden="true" class="header-anchor">#</a> <code>dns.resolve()</code>, <code>dns.resolve*()</code> 和 <code>dns.reverse()</code> 通过网络执行DNS查询（异步）</h4> <p>这些功能实现与 <code>dns.lookup()</code> 截然不同。它们不仅没有使用 <code>getaddrinfo(3)</code> 并且通过网络执行DNS查询。使用异步网络通信，并且没有使用 <code>libuv</code> 线程池。因此,这些函数不会像使用 <code>libuv</code> 线程池的 <code>dns.lookup()</code> 函数一样会对其它进程有负面影响。</p> <p>它们不像 <code>dns.lookup()</code> 一样使用相同的配置文件。例如，它们不会使用来自 <code>/etc/hosts</code> 配置。</p> <h2 id="dns-resolver-dns请求的独立解析程序"><a href="#dns-resolver-dns请求的独立解析程序" aria-hidden="true" class="header-anchor">#</a> dns.Resolver DNS请求的独立解析程序</h2> <p>使用默认的设置创建一个新的解析程序。为一个解析程序设置 <code>servers</code> 使用 <code>resolver.setServers()</code>，它不会影响其他的解析程序：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> Resolver <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dns'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Resolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
resolver<span class="token punctuation">.</span><span class="token function">setServers</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'4.4.4.4'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这个请求将使用 ip: 4.4.4.4 上的服务，独立于全局设置</span>
resolver<span class="token punctuation">.</span><span class="token function">resolve4</span><span class="token punctuation">(</span><span class="token string">'zbj.com'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> addresses<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>addresses<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="resolver-cancel"><a href="#resolver-cancel" aria-hidden="true" class="header-anchor">#</a> resolver.cancel()</h2> <p>取消解析程序未解决的 DNS 查询，相应的回调用一个 <code>ECANCELLED</code> 码调用。</p> <h2 id="dns-getservers"><a href="#dns-getservers" aria-hidden="true" class="header-anchor">#</a> dns.getServers()</h2> <p>返回一个用于当前DNS解析的IP地址的数组的字符串，格式根据rfc5952。如果使用自定义端口，那么字符串将包括一个端口部分。</p> <h2 id="dns-lookup-hostname-options-callback"><a href="#dns-lookup-hostname-options-callback" aria-hidden="true" class="header-anchor">#</a> dns.lookup(hostname[, options], callback)</h2> <h2 id="dns-lookupservice-address-port-callback"><a href="#dns-lookupservice-address-port-callback" aria-hidden="true" class="header-anchor">#</a> dns.lookupService(address, port, callback)</h2> <h2 id="dns-resolve-hostname-rrtype-callback"><a href="#dns-resolve-hostname-rrtype-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolve(hostname[, rrtype], callback)</h2> <h2 id="dns-resolve4-hostname-options-callback"><a href="#dns-resolve4-hostname-options-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolve4(hostname[, options], callback)</h2> <h2 id="dns-resolve6-hostname-options-callback"><a href="#dns-resolve6-hostname-options-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolve6(hostname[, options], callback)</h2> <h2 id="dns-resolveany-hostname-callback"><a href="#dns-resolveany-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveAny(hostname, callback)</h2> <h2 id="dns-resolvecname-hostname-callback"><a href="#dns-resolvecname-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveCname(hostname, callback)</h2> <h2 id="dns-resolvemx-hostname-callback"><a href="#dns-resolvemx-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveMx(hostname, callback)</h2> <h2 id="dns-resolvenaptr-hostname-callback"><a href="#dns-resolvenaptr-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveNaptr(hostname, callback)</h2> <h2 id="dns-resolvens-hostname-callback"><a href="#dns-resolvens-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveNs(hostname, callback)</h2> <h2 id="dns-resolveptr-hostname-callback"><a href="#dns-resolveptr-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolvePtr(hostname, callback)</h2> <h2 id="dns-resolvesoa-hostname-callback"><a href="#dns-resolvesoa-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveSoa(hostname, callback)</h2> <h2 id="dns-resolvesrv-hostname-callback"><a href="#dns-resolvesrv-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveSrv(hostname, callback)</h2> <h2 id="dns-resolvetxt-hostname-callback"><a href="#dns-resolvetxt-hostname-callback" aria-hidden="true" class="header-anchor">#</a> dns.resolveTxt(hostname, callback)</h2> <h2 id="dns-reverse-ip-callback"><a href="#dns-reverse-ip-callback" aria-hidden="true" class="header-anchor">#</a> dns.reverse(ip, callback)</h2> <h2 id="dns-setservers-servers"><a href="#dns-setservers-servers" aria-hidden="true" class="header-anchor">#</a> dns.setServers(servers)</h2> <h2 id="错误码"><a href="#错误码" aria-hidden="true" class="header-anchor">#</a> 错误码</h2> <p>每个DNS查询可以返回一个错误代码如下:</p> <ul><li>dns.NODATA: DNS服务返回没有数据.</li> <li>dns.FORMERR: DNS服务器查询没有格式化.</li> <li>dns.SERVFAIL: DNS服务器返回失败。</li> <li>dns.NOTFOUND: 域名未找到。</li> <li>dns.NOIMP: DNS服务器不执行请求的操作。</li> <li>dns.REFUSED: 查询DNS服务器拒绝。</li> <li>dns.BADQUERY: 未格式化DNS查询。</li> <li>dns.BADNAME: 未格式化主机名</li> <li>dns.BADFAMILY: 没有提供地址族</li> <li>dns.BADRESP: 未格式化DNS回复</li> <li>dns.CONNREFUSED: 无法连接DNS服务器</li> <li>dns.TIMEOUT: 连接DNS服务器超时</li> <li>dns.EOF: 文件末尾</li> <li>dns.FILE: 读取文件错误</li> <li>dns.NOMEM: 内存溢出</li> <li>dns.DESTRUCTION: 通道以及销毁</li> <li>dns.BADSTR: 未格式化字符串</li> <li>dns.BADFLAGS: 指定非法标记</li> <li>dns.NONAME: 给定的主机名不是数字。</li> <li>dns.BADHINTS: 指定非法的提示标志。</li> <li>dns.NOTINITIALIZED: c-ares异步DNS请求库初始化未完成。</li> <li>dns.LOADIPHLPAPI: 加载iphlpapi.dll(Windows IP辅助API应用程序接口模块)错误</li> <li>dns.ADDRGETNETWORKPARAMS: 找不到GetNetworkParams(读取本机DNS信息)函数</li> <li>dns.CANCELLED: DNS查询取消</li></ul></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/OrangeBorning/nodejs.cn/edit/master/docs/API/dns/README.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2018-9-22 10:30:25</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/nodejs.cn/API/module/" class="prev">
          module 模块
        </a></span> <!----></p></div> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div> <!----></div></div>
    <script src="/nodejs.cn/assets/js/8.e8398e58.js" defer></script><script src="/nodejs.cn/assets/js/app.5c390938.js" defer></script>
  </body>
</html>
